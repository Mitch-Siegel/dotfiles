#include "tests-common.sb"

class Stack {
    u8 topIndex;
    u8[256] data;
};

impl Stack {
    fun Init(Stack *self) {
        self.topIndex = 0;
    }

    fun Push(Stack *self, u8 value) {
        // crash here :(
        // self.data[self.topIndex] doesn't work because self.data is an array
        (&self.data)[self.topIndex] = value;
        self.topIndex += 1;
    }

    u8 fun Pop(Stack *self) {
        self.topIndex -= 1;
        // same issue here as above
        return (&self.data)[self.topIndex];
    }

    u8 fun Size(Stack *self) {
        return self.topIndex;
    }
}


fun main() {
    Stack testStack;
    testStack.Init();
    u8 i = 0;
    while(i < 10)
    {
        testStack.Push(10 * i);
        i += 1;
    }

    while(testStack.Size() > 0)
    {
        printNum(testStack.Pop());
    }

    exit();
}
